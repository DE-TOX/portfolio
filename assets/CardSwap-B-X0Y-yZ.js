import{r as n,j as N,R as W,g as E}from"./index-0ftbJ8Gt.js";const P=n.forwardRef(({customClass:r,...e},l)=>N.jsx("div",{ref:l,...e,className:`absolute top-1/2 left-1/2 rounded-xl border border-white bg-black [transform-style:preserve-3d] [will-change:transform] [backface-visibility:hidden] ${r??""} ${e.className??""}`.trim()}));P.displayName="Card";const I=(r,e,l,m)=>({x:r*e,y:-r*l,z:-r*e*1.5,zIndex:m-r}),V=(r,e,l)=>E.set(r,{x:e.x,y:e.y,z:e.z,xPercent:-50,yPercent:-50,skewY:l,transformOrigin:"center center",zIndex:e.zIndex,force3D:!0}),Y=({width:r=500,height:e=400,cardDistance:l=60,verticalDistance:m=70,delay:b=5e3,pauseOnHover:h=!1,onCardClick:j,skewAmount:k=6,easing:C="elastic",children:D})=>{const w=typeof window<"u"&&window.innerWidth<768,f=w?l*.6:l,v=w?m*.6:m,M=w?k*.5:k,o=C==="elastic"?{ease:"elastic.out(0.6,0.9)",durDrop:2,durMove:2,durReturn:2,promoteOverlap:.9,returnDelay:.05}:{ease:"power1.inOut",durDrop:.8,durMove:.8,durReturn:.8,promoteOverlap:.45,returnDelay:.2},x=n.useMemo(()=>n.Children.toArray(D),[D]),c=n.useMemo(()=>x.map(()=>W.createRef()),[x.length]),z=n.useRef(Array.from({length:x.length},(u,s)=>s)),R=n.useRef(null),p=n.useRef(void 0),$=n.useRef(null);n.useEffect(()=>{const u=c.length;c.forEach((t,d)=>V(t.current,I(d,f,v,u),M));const s=()=>{if(z.current.length<2)return;const[t,...d]=z.current,i=c[t].current,a=E.timeline();R.current=a,a.to(i,{y:"+=500",duration:o.durDrop,ease:o.ease}),a.addLabel("promote",`-=${o.durDrop*o.promoteOverlap}`),d.forEach((A,L)=>{const S=c[A].current,g=I(L,f,v,c.length);a.set(S,{zIndex:g.zIndex},"promote"),a.to(S,{x:g.x,y:g.y,z:g.z,duration:o.durMove,ease:o.ease},`promote+=${L*.15}`)});const y=I(c.length-1,f,v,c.length);a.addLabel("return",`promote+=${o.durMove*o.returnDelay}`),a.call(()=>{E.set(i,{zIndex:y.zIndex})},void 0,"return"),a.to(i,{x:y.x,y:y.y,z:y.z,duration:o.durReturn,ease:o.ease},"return"),a.call(()=>{z.current=[...d,t]})};if(s(),p.current=window.setInterval(s,b),h){const t=$.current,d=()=>{R.current?.pause(),clearInterval(p.current)},i=()=>{R.current?.play(),p.current=window.setInterval(s,b)};return t.addEventListener("mouseenter",d),t.addEventListener("mouseleave",i),()=>{t.removeEventListener("mouseenter",d),t.removeEventListener("mouseleave",i),clearInterval(p.current)}}return()=>clearInterval(p.current)},[f,v,b,h,M,C]);const O=x.map((u,s)=>n.isValidElement(u)?n.cloneElement(u,{key:s,ref:c[s],style:{width:r,height:e,...u.props.style??{}},onClick:t=>{u.props.onClick?.(t),j?.(s)}}):u);return N.jsx("div",{ref:$,className:"relative lg:absolute lg:bottom-0 lg:right-0 lg:transform lg:translate-x-[5%] lg:translate-y-[20%] lg:origin-bottom-right perspective-[900px] overflow-visible mx-auto lg:mx-0",style:{width:typeof r=="number"?`${r}px`:r,height:typeof e=="number"?`${e}px`:e,maxWidth:"100%"},children:O})};export{P as Card,Y as default};
