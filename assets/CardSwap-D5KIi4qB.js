import{r as n,j as M,R as j}from"./index-Bxf7iPHk.js";import{g as R}from"./index-DKtf60Sy.js";const O=n.forwardRef(({customClass:r,...e},o)=>M.jsx("div",{ref:o,...e,className:`absolute top-1/2 left-1/2 rounded-xl border border-white bg-black [transform-style:preserve-3d] [will-change:transform] [backface-visibility:hidden] ${r??""} ${e.className??""}`.trim()}));O.displayName="Card";const z=(r,e,o,m)=>({x:r*e,y:-r*o,z:-r*e*1.5,zIndex:m-r}),A=(r,e,o)=>R.set(r,{x:e.x,y:e.y,z:e.z,xPercent:-50,yPercent:-50,skewY:o,transformOrigin:"center center",zIndex:e.zIndex,force3D:!0}),F=({width:r=500,height:e=400,cardDistance:o=60,verticalDistance:m=70,delay:y=5e3,pauseOnHover:I=!1,onCardClick:N,skewAmount:h=6,easing:w="elastic",children:E})=>{const a=w==="elastic"?{ease:"elastic.out(0.6,0.9)",durDrop:2,durMove:2,durReturn:2,promoteOverlap:.9,returnDelay:.05}:{ease:"power1.inOut",durDrop:.8,durMove:.8,durReturn:.8,promoteOverlap:.45,returnDelay:.2},f=n.useMemo(()=>n.Children.toArray(E),[E]),u=n.useMemo(()=>f.map(()=>j.createRef()),[f.length]),g=n.useRef(Array.from({length:f.length},(c,s)=>s)),b=n.useRef(null),x=n.useRef(void 0),k=n.useRef(null);n.useEffect(()=>{const c=u.length;u.forEach((t,d)=>A(t.current,z(d,o,m,c),h));const s=()=>{if(g.current.length<2)return;const[t,...d]=g.current,p=u[t].current,l=R.timeline();b.current=l,l.to(p,{y:"+=500",duration:a.durDrop,ease:a.ease}),l.addLabel("promote",`-=${a.durDrop*a.promoteOverlap}`),d.forEach(($,C)=>{const L=u[$].current,v=z(C,o,m,u.length);l.set(L,{zIndex:v.zIndex},"promote"),l.to(L,{x:v.x,y:v.y,z:v.z,duration:a.durMove,ease:a.ease},`promote+=${C*.15}`)});const i=z(u.length-1,o,m,u.length);l.addLabel("return",`promote+=${a.durMove*a.returnDelay}`),l.call(()=>{R.set(p,{zIndex:i.zIndex})},void 0,"return"),l.to(p,{x:i.x,y:i.y,z:i.z,duration:a.durReturn,ease:a.ease},"return"),l.call(()=>{g.current=[...d,t]})};if(s(),x.current=window.setInterval(s,y),I){const t=k.current,d=()=>{b.current?.pause(),clearInterval(x.current)},p=()=>{b.current?.play(),x.current=window.setInterval(s,y)};return t.addEventListener("mouseenter",d),t.addEventListener("mouseleave",p),()=>{t.removeEventListener("mouseenter",d),t.removeEventListener("mouseleave",p),clearInterval(x.current)}}return()=>clearInterval(x.current)},[o,m,y,I,h,w]);const S=f.map((c,s)=>n.isValidElement(c)?n.cloneElement(c,{key:s,ref:u[s],style:{width:r,height:e,...c.props.style??{}},onClick:t=>{c.props.onClick?.(t),N?.(s)}}):c);return M.jsx("div",{ref:k,className:"absolute bottom-0 right-0 transform translate-x-[5%] translate-y-[20%] origin-bottom-right perspective-[900px] overflow-visible max-[768px]:translate-x-[25%] max-[768px]:translate-y-[25%] max-[768px]:scale-[0.75] max-[480px]:translate-x-[25%] max-[480px]:translate-y-[25%] max-[480px]:scale-[0.55]",style:{width:r,height:e},children:S})};export{O as Card,F as default};
